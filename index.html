
<!DOCTYPE html>
<html>
<head>
<title>Blog de José Manuel Mira</title>
<meta charset="UTF-8">
<link rel="shortcut icon" href="favicon.png" type="image/png" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="js/calendar-gc.css">
<script src='js/jquery-3.6.0.min.js'></script>
<script src="js/calendar-gc.min.js"></script>
<style>
body,h1,h2,h3,h4,h5 {font-family: "Raleway", sans-serif}
</style>
</head>
<body class="w3-light-grey">

<!-- w3-content defines a container for fixed size centered content, 
and is wrapped around the whole page content, except for the footer in this example -->
<div class="w3-content" style="max-width:1400px">

<!-- Header -->
<header class="w3-container w3-center w3-padding-32"> 
  <h1><b>MY BLOG</b></h1>
  <p>Welcome to the blog of <span class="w3-tag">Jos&eacute; Manuel Mira</span></p>
</header>

<!-- Grid -->
<div class="w3-row">

<!-- Blog entries -->
<div class="w3-col l8 s12">
  <!-- Blog entry -->
  <div class="w3-card-4 w3-margin w3-white">
    <img src="img/geobanner.png" alt="Nature" style="width:100%">
    <div class="w3-container">
      <h3><b>Decodificando el mundo</b></h3>
      <h5>Blog sobre geomática en general y otras rarezas en particular, <span class="w3-opacity">April 7, 2014</span></h5>
    </div>
    <!-- redes sociales -->
    <div class="w3-container w3-padding">
	<div class="w3-center">
		<p>
			<span style="color: Dodgerblue;">
				<a href="http://www.facebook.com/sharer.php?u=https%3A%2F%2Fjosemamira.github.io" target="_blank">
					<i class="fa fa-facebook-official fa-2x w3-hover-opacity"></i>
				</a>
			</span>
			<span style="color: green;">
				<a href="https://wa.me/34601218853/?text=Bienvenido%20al%20blog%20sobre%20geom&aacute;tica%20de%20J3M" target="_blank">
					<i class="fa fa-whatsapp fa-2x w3-hover-opacity"></i>
				</a>
			</span>
			<span style="color: Dodgerblue;">
				<a href="https://twitter.com/intent/tweet?text=Bienvenido%20al%20blog%20sobre%20geom&aacute;tica%20de%20J3M&url=https%3A%2F%2Fjosemamira.github.io&via=j3m&hashtags=geomatica,sig" target="_blank">
					<i class="fa fa-twitter fa-2x w3-hover-opacity"></i>
				</a>
			</span>
		</p>
	</div>
    </div>	  

    <div class="w3-container">
      <p>
		 Bienvenido a esta blog. Espero no defraudarte. Nuestro objetivo es escribir sobre aspectos que nos llaman 
		 la atención sobre el mundo de los SIG desde el punto de vista que más me gusta, el de la programación. 
		 Si lo encuentras interesante y te gusta participar ponte en contacto conmigo en:
       </p>
       <p><a href="mailto:josema.mira@gmail.com">josema.mira@gmail.com</a></p>
        
        
        <div class="w3-row">
			<div class="w3-col m8 s12">
				<p><button class="w3-button w3-padding-large w3-white w3-border" onclick="document.getElementById('expandTextHead').style.display='block'"><b>LEER M&Aacute;S &raquo;</b></button></p>
			</div>
			<div id="expandTextHead" class="w3-panel w3-display-container" style="display: none;">
				<span onclick="this.parentElement.style.display='none'"  class="w3-button w3-red w3-display-topright">x</span>
				<!-- Ejemplo HTML -->
				<h1>TEXTO_LARGO</h1>
				<p><a href="https://es.lipsum.com/">Lorem Ipsum</a> es simplemente el texto de relleno de las imprentas y archivos de texto. Lorem Ipsum ha sido el texto de relleno estándar de las industrias desde el año 1500, cuando un impresor (N. del T. persona que se dedica a la imprenta) desconocido usó una galería de textos y los mezcló de tal manera que logró hacer un libro de textos especimen. No sólo sobrevivió 500 años, sino que tambien ingresó como texto de relleno en documentos electrónicos, quedando esencialmente igual al original. Fue popularizado en los 60s con la creación de las hojas "Letraset", las cuales contenian pasajes de Lorem Ipsum, y más recientemente con software de autoedición, como por ejemplo Aldus PageMaker, el cual incluye versiones de Lorem Ipsum.
				<img src="https://www.w3schools.com/html/img_girl.jpg" alt="Girl in a jacket" width="500" height="600">
			</div> 
		</div>  

    </div>
  </div>
  <hr>

  <div id="marcador"></div>


  <!-- divBlogUltimo-->
	<div id="divBlogUltimo"></div>
	<hr>
<!-- END divBlogUltimo -->

  <!-- divUnPost-->
	<div id="divUnPost"></div>
	<hr>
<!-- END divUnPost -->





  <!-- divBotonPosts listado 5 posts-->
	<div id="divBotonPosts"></div>
	<hr>
<!-- END -->
  
  <!-- paginador -->
  <div class="w3-card-4 w3-margin w3-white">

    <div class="w3-container">
      <h3><b>Search in posts</b></h3> 
    </div>

    <div class="w3-container">		
		<div class="w3-container w3-white w3-bottombar w3-border-gray w3-border w3-center">
			<p><div id="paginador"></div></p>
		</div>		
		<p>&nbsp;</p>		
    </div>
  </div>
  <hr>



  <!-- Posts -->
  <div id="popularPosts"> </div>
  <hr>
  



  <!-- Calendar -->
  <div class="w3-card-4 w3-margin w3-white">

    <div class="w3-container">
      <h3><b>Calendario</b></h3>

    </div>

    <div class="w3-container">
		<div id="calendar" style="padding: 1rem;"></div>
    </div>
  </div>
  <hr>



<!-- END BLOG ENTRIES -->
</div>

  <!-- ARTICULOS DE UN TAG-->
  <div id="postsByTagContainer" class="w3-card w3-margin" style="display:none">
    <div class="w3-container w3-padding">
      <h4 id="tagNameTitle"></h4>
    </div>
    <ul id="postsByTag" class="w3-ul w3-hoverable w3-white">
  </div> 













<!-- Introduction menu -->
<div class="w3-col l4">
  <!-- About Card -->
  <div class="w3-card w3-margin w3-margin-top">
  <img src="img/avatar.jpg" style="width:100%">
    <div class="w3-container w3-white">
      <h4><b>My Name</b></h4>
      <p>Just me, myself and I, exploring the universe of uknownment. I have a heart of love and a interest of lorem ipsum and mauris neque quam blog. I want to share my world with you.</p>
    </div>
  </div><hr>
  
  <!-- Posts -->
  <div class="w3-card w3-margin">
    <div class="w3-container w3-padding">
      <h4>Our team</h4>
    </div>
    <ul class="w3-ul w3-hoverable w3-white">
      <li class="w3-padding-16">
        <img src="img/team/ceo.png" alt="Image" class="w3-left w3-margin-right" style="width:50px">
        <span class="w3-large">Jose</span><br>
        <span>Main CEO</span>
      </li>
      <li class="w3-padding-16">
        <img src="img/team/girl.png" alt="Image" class="w3-left w3-margin-right" style="width:50px">
        <span class="w3-large">Inma</span><br>
        <span>Sales</span>
      </li> 
      <li class="w3-padding-16">
        <img src="img/team/boy.png" alt="Image" class="w3-left w3-margin-right" style="width:50px">
        <span class="w3-large">Miguel</span><br>
        <span>Marketing</span>
      </li>   
      <li class="w3-padding-16 w3-hide-medium w3-hide-small">
        <img src="img/team/girl2.png" alt="Image" class="w3-left w3-margin-right" style="width:50px">
        <span class="w3-large">Bego</span><br>
        <span>Human resources</span>
      </li>  
    </ul>
  </div>
  <hr> 
 
  <!-- Labels / tags -->
  <div class="w3-card w3-margin">
    <div class="w3-container w3-padding">
      <h4>Tags</h4>
    </div>
    <div class="w3-container w3-white">
		<p id="tagsList"></p>
    </div>
  </div>
  
  
  <!-- enlaces de interes -->
    <!-- Posts -->
  <div class="w3-card w3-margin">
    <div class="w3-container w3-padding">
      <h4>Links</h4>
    </div>
    <ul class="w3-ul w3-hoverable w3-white">
		<div id="links"></div>
    </ul>
  </div>
  <hr> 
  
  
  
<!-- END Introduction Menu -->
</div>

<!-- END GRID -->
</div><br>

<!-- END w3-content -->
</div>

<!-- Footer -->
<!--<footer class="w3-container w3-dark-grey w3-padding-32 w3-margin-bottom">
	<div id="paginador"></div>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a>
   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Develop by <a href="https://josemamira.github.io/" target="_blank">Jos&eacute; Manuel Mira</a></p>
</footer>-->


<footer class="w3-container w3-padding-64 w3-dark-grey w3-center w3-large"> 
  <i class="fa fa-facebook-official w3-hover-opacity"></i>
  <i class="fa fa-instagram w3-hover-opacity"></i>
  <i class="fa fa-snapchat w3-hover-opacity"></i>
  <i class="fa fa-pinterest-p w3-hover-opacity"></i>
  <i class="fa fa-twitter w3-hover-opacity"></i>
  <i class="fa fa-linkedin w3-hover-opacity"></i>
  <p>Develop by J<a href="newpost.html" target="_blank" class="w3-hover-text-green"><i class="fa fa-bullseye w3-hover-opacity"></i></a>s&eacute; Manuel Mira</p>
  <p>Powered by <a href="https://josemamira.github.io/" target="_blank" class="w3-hover-text-green">w3.css</a></p>
</footer>



<script>

	// hacer global la peticion ajax en variable myData
	// myData es un array de objetos.
	var url = 'https://josemamira.github.io/post/posts.json';

    var myData = getSomething();

    function getSomething(){
        var result = null;
        $.ajax({
            async: false,
            url: url,
            data: {},
            dataType: "json",
            success: function(data){
                result = data.posts;
            }
        });
        return result;
    }
    
    // Decomentar para test
    //console.log(myData);
    
    // load links.json
	var url2 = 'https://josemamira.github.io/post/links.json';
    var myLinks = getSomething2();

    function getSomething2(){
        var result2 = null;
        $.ajax({
            async: false,
            url: url2,
            data: {},
            dataType: "json",
            success: function(data){
                result2 = data.links;
            }
        });
        return result2;
    }    
    //console.log(myLinks);
    
    
    

// vaciamos la lista de post
document.getElementById("popularPosts").style.display = "none";
// listado temas
const themeArr = ["Programación", "Deportes", "Variado","Música", "SIG","Cartografía", "Otros"];
const authorArr = ["Jos&eacute; Manuel Mira", "Inmaculada Belmonte", "Paula Pira","Rubén Lira", "Sancho Panza","Alonso Quijano", "Javier Cercas"];	

// Analizar la URL para obtener enlace a un artículo
//comprueba si hay una url con el codigo del tipo http://localhost/index.html?id=3
var laURL = window.location.href;
var patron = /id=/i;
var res = laURL.match(patron);
if (res == "id=") {
	var id_art = window.location.href.split( '?id=' )[1];
	//alert('con id');
	loadPost(id_art);
	//lastPost();
	
} else {
	//alert('sin id');
	lastPost();
	
}	
makePagination();




function makePagination() {
	    //var divisor = 5;

		//console.log(myData);
		const numPost = myData.length;
		if (numPost <= 50) { var divisor = 5; } 
		else if (numPost > 50 && numPost <=100) { var divisor = 10; } 
		else if (numPost > 100 && numPost <=200) { var divisor = 20; } 
		else if (numPost > 200 && numPost <=500) { var divisor = 50; } 
		else if (numPost > 500 && numPost <=1000) { var divisor = 100; }
		else { var divisor = 100; }	
		//console.log("nº: "+ numPost);
		const numBot =numPost / divisor; // nº botones
		//console.log(numBot);
		const resto = numPost % divisor; //console.log('resto es ' + resto);		
		var bFin='';
		var paginador='';
		var paginas = '';
		var filtrado =[];
		
		if (numPost <= divisor) {
			//console.log('hay menos o igual a divisor (5)');
			
			for (var i = 1; i <= numPost; i++) {				
				paginas += '<button class="w3-button w3-light-grey w3-border w3-hover-red" onclick="onePost('+i+'); jump(\'marcador\')">'+i+'</button>';												
			}
			paginador = '<div class="pagination">'+paginas+'</div>';
			
			
		}
		else {
			//console.log('hay más de divisor(5). Paginar');
			var bFin=''; 
			if (resto == 0) {
				//console.log('justo');
				bFin=''; 
			} else {
				//console.log('sobran:  '+ resto);
				numIni =  Math.floor(numBot)*divisor;
				numFin = numIni + resto;
				const filtrado = myData.filter(post => post.id >= numIni ).filter(post => post.id <= numFin );
				bFin = '<button class="w3-button w3-light-grey w3-border w3-hover-red" onClick="listadoBoton('+numIni+','+numFin+')" >'+numIni+'-'+numFin+'</button>'; 

			}
			
			var paginas = '';
			for (var i = 1; i <= numBot; i++) {
				numIni = ((divisor*i)-divisor)+1;
				numFin = divisor * i;
				
				// para cada boton pasamos una función con su inicio y fin
				// filtramos el array para quedarnos con inicio y fin
				filtrado = myData.filter(post => post.id >= numIni ).filter(post => post.id <= numFin );
				paginas += '<button class="w3-button w3-light-grey w3-border w3-hover-red" onclick="listadoBoton('+numIni+','+numFin+')" >'+numIni+'-'+numFin+'</button>';	
			}				
			paginador = '<div class="pagination">'+paginas+bFin+'</div>';	
		}
		
		//console.log(paginador);
		$('#paginador').append(paginador);
		

		
}




// Vacia y rellena popularPosts
function listadoBoton(inicio,fin) {
	//console.log(' funcion listadoBoton ');
	//alert("The pagina begin with " + inicio + ", and end with "+ fin);
	//console.log( myData );
	var filtrado=[];
	$( "#popularPosts" ).empty();

	let txt = '<div class="w3-card-4 w3-margin w3-white">'+
		'<div class="w3-container w3-padding">'+
		  '<h4>Popular Posts del '+inicio+' al '+fin+'.</h4>'+
		'</div>'+
		'<ul class="w3-ul w3-hoverable w3-white">';
	filtrado = myData.filter(post => post.id >= inicio ).filter(post => post.id <= fin );
	filtrado.forEach(myFunction);

	function myFunction(obj, index, array) {
	  //txt += obj.titulo + '<br>';
	  txt += '<li class="w3-padding-16" onclick="onePost('+obj.id+'); jump(\'marcador\')">'+
				  '<img src="img/theme/min/'+obj.tema+'.jpg" alt="Image" class="w3-left w3-margin-right" style="width:50px">'+
				  '<span class="w3-badge w3-green">'+obj.id+'</span>&nbsp;&nbsp;<span class="w3-large">'+obj.titulo+'</span><br>'+
				  '<span>  Tema: '+themeArr[obj.tema]+ '  Fecha: '+obj.fecha_publicacion+'</span>'+
			  '</li>';
	}
	//console.log(txt+'</ul></div><hr>');
	$('#popularPosts').append(txt);
	document.getElementById('popularPosts').style.display='block';
	

}
	
/*	function loadPost(id) {	
		//id = 1;	
		var url = 'https://josemamira.github.io/post/posts.json';
		$( "#divUnPost" ).empty();
		$.getJSON(url, function(data) {
			//console.log(data);
			// obtener nº de posts (length)
			const numPost = Object.keys(data.posts).length;
			console.log(numPost);
			const obj = data.posts[id-1];
			//const str = JSON.stringify(data);
			//console.log(obj); 
			//console.log(obj.titulo); 
			//console.log(obj.tema);
						
			var divBlog = '';
			divBlog += '<div class="w3-card-4 w3-margin w3-white">'+
					'<img src="img/theme/'+obj.tema+'.jpg" alt="Theme" style="width:100%">'+
					'<div class="w3-container">'+
						'<h3><b>'+obj.titulo+'</b></h3>'+
						'<h5>THEME: <span class="w3-opacity">'+themeArr[obj.tema]+', </span>, DATE <span class="w3-opacity">'+obj.fecha_articulo+'</span>, AUTHOR: <span class="w3-opacity">'+authorArr[obj.autor]+'</span></h5>'+
					'</div>	'+
					'<div class="w3-container">'+
						'<p>'+obj.texto_corto+'</p>'+
						'<div class="w3-row">'+						
						
						   '<div class="w3-col m8 s12">'+
							  '<p><button class="w3-button w3-padding-large w3-white w3-border" onclick="document.getElementById(\'expandText'+id+'\').style.display=\'block\'"><b>LEER M&Aacute;S &raquo;</b></button></p>'+
							'</div>'+
							'<div id="expandText'+id+'" class="w3-panel w3-display-container" style="display: none;">'+
								'<span onclick="this.parentElement.style.display=\'none\'"  class="w3-button w3-red w3-display-topright">x</span>'+
								 obj.texto_largo +
							'</div>'+	
												
						'</div>'+
					'</div>'+
				'</div>';

			$('#divBlogUltimo').append(divBlog);
			document.getElementById('divUnPost').style.display='block';
		});
	}

*/

	function loadPost(id) {	
		//id = 1;	
		var url = 'https://josemamira.github.io/post/posts.json';
		$('#divBlogUltimo').empty();
		$.getJSON(url, function(data) {
			console.log(data);
			// obtener nº de posts (length)
			const numPost = Object.keys(data.posts).length;
			console.log(numPost);
			const obj = data.posts[id-1];					
			var divBlog = '';			
			divBlog += '<div class="w3-card-4 w3-margin w3-white">'+
					'<img src="img/theme/'+obj.tema+'.jpg" alt="Theme" style="width:100%">'+
					'<div class="w3-container">'+
						'<h3><b>'+obj.titulo+'</b></h3>'+
						'<h5>TEM&Aacute;TICA: '+themeArr[obj.tema]+', <span class="w3-opacity">DATE '+obj.fecha_articulo+'</span></h5>'+
					'</div>	'+
					
					'<div class="w3-container w3-padding">'+
						'<div class="w3-center">'+
							'<p>'+
								'<span style="color: Dodgerblue;">'+
									'<a href="http://www.facebook.com/sharer.php?u='+encodeURIComponent('https://josemamira.github.io.es/index.html?id='+id)+'" target="_blank">'+
										'<i class="fa fa-facebook-official fa-2x w3-hover-opacity"></i>'+
									'</a>'+
								'</span>'+
								'<span style="color: green;">'+
									'<a href="https://wa.me/34601218853/?text='+encodeURIComponent(obj.titulo)+'" target="_blank">'+
										'<i class="fa fa-whatsapp fa-2x w3-hover-opacity"></i>'+
									'</a>'+
								'</span>'+
								'<span style="color: Dodgerblue;">'+
									'<a href="https://twitter.com/intent/tweet?text='+encodeURIComponent(obj.titulo)+'&url='+encodeURIComponent('https://josemamira.github.io.es/index.html?id='+id)+'&via=j3m&hashtags=geomatica,sig" target="_blank">'+
										'<i class="fa fa-twitter fa-2x w3-hover-opacity"></i>'+
									'</a>'+
								'</span>'+
							'</p>'+
						'</div>'+						
					'</div>'+	
									
					'<div class="w3-container">'+
						'<p>'+obj.texto_corto+'</p>'+
						'<div class="w3-row">'+						
						
						   '<div class="w3-col m8 s12">'+
							  '<p><button class="w3-button w3-padding-large w3-white w3-border" onclick="document.getElementById(\'expandText'+id+'\').style.display=\'block\'"><b>LEER M&Aacute;S &raquo;</b></button></p>'+
							'</div>'+
							'<div id="expandText'+id+'" class="w3-panel w3-display-container" style="display: none;">'+
								'<span onclick="this.parentElement.style.display=\'none\'"  class="w3-button w3-red w3-display-topright">x</span>'+
								 obj.texto_largo +
							'</div>'+	
												
						'</div>'+
					'</div>'+
				'</div>';

			$('#divBlogUltimo').append(divBlog);
			document.getElementById('divBlogUltimo').style.display='block';
		});
	}	
	
	function loadLinks() {	
		$( '#links' ).empty();
			var txt = '';
			myLinks.forEach(myFunction);

			function myFunction(obj, index, array) {
				  txt += '<li class="w3-padding-16">'+
						'<img src="img/links/'+obj.logo+'" alt="Image" class="w3-left w3-margin-right" style="width:50px">'+
						'<span class="w3-large">'+obj.nombre+'</span><br>'+
						'<span><a href="'+obj.web+'" target="_blank">'+obj.web+'</a></span>'+
					'</li>'; 
			}
				
			$('#links').append(txt);
			document.getElementById('links').style.display='block';
	}
	loadLinks();




	function lastPost() {	
			const numPost = myData.length;
			const obj = myData[numPost-1];
			id = numPost-1;		
			var divBlog = '';
			divBlog += '<div class="w3-card-4 w3-margin w3-white">'+
					'<img src="img/theme/'+obj.tema+'.jpg" alt="Theme" style="width:100%">'+
					'<div class="w3-container">'+
						'<h3><b>'+obj.titulo+'</b></h3>'+
						'<h5>THEME: <span class="w3-opacity">'+themeArr[obj.tema]+', </span>, DATE <span class="w3-opacity">'+obj.fecha_articulo+'</span>, AUTHOR: <span class="w3-opacity">'+authorArr[obj.autor]+'</span></h5>'+
					'</div>	'+
				
					'<div class="w3-container w3-padding">'+
						'<div class="w3-center">'+
							'<p>'+
								'<span style="color: Dodgerblue;">'+
									'<a href="http://www.facebook.com/sharer.php?u='+encodeURIComponent('https://josemamira.github.io.es/index.html?id='+id)+'" target="_blank">'+
										'<i class="fa fa-facebook-official fa-2x w3-hover-opacity"></i>'+
									'</a>'+
								'</span>'+
								'<span style="color: green;">'+
									'<a href="https://wa.me/34601218853/?text='+encodeURIComponent(obj.titulo)+'" target="_blank">'+
										'<i class="fa fa-whatsapp fa-2x w3-hover-opacity"></i>'+
									'</a>'+
								'</span>'+
								'<span style="color: Dodgerblue;">'+
									'<a href="https://twitter.com/intent/tweet?text='+encodeURIComponent(obj.titulo)+'&url='+encodeURIComponent('https://josemamira.github.io.es/index.html?id='+id)+'&via=j3m&hashtags=geomatica,sig" target="_blank">'+
										'<i class="fa fa-twitter fa-2x w3-hover-opacity"></i>'+
									'</a>'+
								'</span>'+
							'</p>'+
						'</div>'
					'</div>'+
				
					'<div class="w3-container">'+
						'<p>'+obj.texto_corto+'</p>'+
						'<div class="w3-row">'+
						   '<div class="w3-col m8 s12">'+
							  '<p><button class="w3-button w3-padding-large w3-white w3-border" onclick="document.getElementById(\'expandText'+id+'\').style.display=\'block\'"><b>LEER M&Aacute;S &raquo;</b></button></p>'+
							'</div>'+
							'<div id="expandText'+id+'" class="w3-panel w3-display-container" style="display: none;">'+
								'<span onclick="this.parentElement.style.display=\'none\'"  class="w3-button w3-red w3-display-topright">x</span>'+
								 obj.texto_largo +
							'</div>'+
						'</div>'+
					'</div>'+
				'</div>';
			$('#divBlogUltimo').append(divBlog);
			document.getElementById('divBlogUltimo').style.display='block';
		
	}
	
	function onePost(id) {
		    //console.log('onePost: ' + id);
			$('#divBlogUltimo').empty();
			const numPost = myData.length;
			const obj = myData[id-1];					
			var divBlog = '';
			divBlog += '<div class="w3-card-4 w3-margin w3-white">'+
					'<img src="img/theme/'+obj.tema+'.jpg" alt="Theme" style="width:100%">'+
					'<div class="w3-container">'+
						'<h3><b>'+obj.titulo+'</b></h3>'+
						'<h5>TEM&Aacute;TICA: '+themeArr[obj.tema]+', <span class="w3-opacity">DATE '+obj.fecha_articulo+'</span></h5>'+
					'</div>	'+
					'<div class="w3-container">'+
						'<p>'+obj.texto_corto+'</p>'+
						'<div class="w3-row">'+
						   '<div class="w3-col m8 s12">'+
							  '<p><button class="w3-button w3-padding-large w3-white w3-border" onclick="document.getElementById(\'expandText'+id+'\').style.display=\'block\'"><b>LEER M&Aacute;S &raquo;</b></button></p>'+
							'</div>'+
							'<div id="expandText'+id+'" class="w3-panel w3-display-container" style="display: none;">'+
								'<span onclick="this.parentElement.style.display=\'none\'"  class="w3-button w3-red w3-display-topright">x</span>'+
								 obj.texto_largo +
							'</div>'+
						'</div>'+
					'</div>'+
				'</div>';
			$('#divBlogUltimo').append(divBlog);
			document.getElementById('divBlogUltimo').style.display='block';
		
	}	
	// obtiene un array de tags sin duplicados para coloar en etiquetas
	function getTags() {
		var tags=[];
		myData.forEach(function (arrayItem) {			
			//var x = arrayItem.tags;
			arraySplit = arrayItem.tags.split(',');
			//console.log(arraySplit);

			arraySplit.forEach(function(elemento, indice, array) {
				tags.push(elemento)
				//console.log(elemento, indice);
			})		
		});

		// Elimina duplicados
		var uniqueTags = Array.from(new Set(tags))
		//console.log(uniqueTags);
		
		var contenido='';
		uniqueTags.forEach(function(element) {  
			//console.log(element);
			var colores = ["red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","aqua","teal","green","light-green","lime","sand","khaki","yellow","amber","orange","deep-orange","blue-gray","brown","light-gray","gray","dark-gray","pale-red","pale-yellow","pale-green","pale-blue"];
			var colorRand = colores[~~(Math.random() * colores.length)];
			contenido += '<button onClick="loadPostsByTag(\''+element+'\'); jump(\'popularPosts\')" class="w3-button w3-small  w3-'+colorRand+'">'+element+'</button> ';
		//<span class="w3-tag w3-light-grey w3-small w3-margin-bottom">
		});
		$("#tagsList").append(contenido);
		
	}
	getTags();
	
	function loadPostsByTag(tagName) {	
		$( "#popularPosts" ).empty();

		let txt = '<div class="w3-card-4 w3-margin w3-white">'+
			'<div class="w3-container w3-padding">'+
			  '<h4>Posts con el tag <strong>'+tagName+'</strong> :</h4>'+
			'</div>'+
			'<ul class="w3-ul w3-hoverable w3-white">';

		// Buscar palabra en array de objetos
		for(var i=0; i< myData.length; i++) {
			var index = myData[i].tags.indexOf(tagName);
			if(index >= 0) {
				//console.log("la palabra existe dentro de la cadena y se encuentra en la posición " + index);
				//console.log("la palabra está en el post con indice " + i);
				txt += '<li class="w3-padding-16" onclick="onePost('+myData[i].id+'); jump(\'marcador\')">'+
					  '<img src="img/theme/min/'+myData[i].tema+'.jpg" alt="Image" class="w3-left w3-margin-right" style="width:50px">'+
					  '<span class="w3-badge w3-green">'+myData[i].id+'</span>&nbsp;&nbsp;<span class="w3-large">'+myData[i].titulo+'</span><br>'+
					  '<span>  Tema: '+themeArr[myData[i].tema]+ '  Fecha: '+myData[i].fecha_publicacion+'</span>'+
				  '</li>';
			}
		}
		$('#popularPosts').append(txt);
		document.getElementById('popularPosts').style.display='block';
		//jump('marcador');
	}
	
	// función para navegar (anchor) a un div como si fuera un marcador
	function jump(h){
		var top = document.getElementById(h).offsetTop;
		window.scrollTo(0, top);
	}



$(document).ready(function(){
	//lastPost();
});			
</script>

<script>
  $(function (e) {
    var calendar = $("#calendar").calendarGC({
      dayBegin: 1,
      prevIcon: '&#x3c;',
      nextIcon: '&#x3e;',
      onPrevMonth: function (e) {
        console.log("prev");
        console.log(e)
      },
      onNextMonth: function (e) {
        console.log("next");
        console.log(e)
      },
      dayNames: ['domingo', 'lunes', 'martes', 'miércoles', 'jueves', 'viernes', 'sábado'],
      monthNames:['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
      events: [
        {
          date: new Date("2022-06-07"),
          eventName: "Holiday",
          text: "cumple ana",
          className: "badge bg-danger",
          onclick(e, data) {
            console.log(data.text);
          },
          dateColor: "red"
        },
        {
          date: new Date("2022-06-07"),
          eventName: "Holiday with wife",
          className: "badge bg-danger",
          onclick(e, data) {
            console.log(data);
          },
          dateColor: "red"
        },
        {
          date: new Date("2022-06-11"),
          eventName: "Working day",
          className: "badge bg-success",
          onclick(e, data) {
            console.log(data);
          },
          dateColor: "green"
        }
      ],
      onclickDate: function (e, data) {
        console.log(e, data);
      }
    });
  })
</script>



</body>
</html>
